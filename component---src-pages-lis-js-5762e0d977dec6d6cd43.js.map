{"version":3,"file":"component---src-pages-lis-js-5762e0d977dec6d6cd43.js","mappings":"+OAWA,MAmBaA,EAAO,IAAM,gBAAC,IAAG,CAACC,MAAM,aAErC,UArBmB,KACjB,MAAM,EAACC,EAAK,EAACC,IAAWC,EAAAA,EAAAA,UAAS,CAAC,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,IAUrF,OACA,gBAAC,IAAM,KACL,kDACA,0BAAQC,SAZY,KAEpB,IADA,IAAIC,EAAI,GACCC,EAAI,EAAGA,EAAI,GAAIA,IAAKD,EAAEE,KAAKD,GACpC,IAASA,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,IAAIE,EAAIC,KAAKC,MAAMD,KAAKE,UAAY,GAAKL,IAAMA,GAC9CD,EAAEC,GAAID,EAAEG,IAAM,CAACH,EAAEG,GAAIH,EAAEC,GAC1B,CACAJ,EAAQG,EAAE,GAKqBO,UAAK,IAAM,wBAC1C,gBAACC,EAAO,CAACZ,KAAMA,IACR,EAKc,IAEnBY,EAAO,2CA+BX,WAAYC,GAAQ,IAAD,GACjB,cAAMA,IAAM,MACPC,MAAQ,CACXC,SAAU,EACVC,KAAM,GAER,IAAIC,EAAIJ,EAAMb,KAAKkB,OACnB,EAAKC,WAAa,GAClB,EAAKC,UAAY,GACjB,EAAKC,sBAAwB,GAC7B,EAAKC,kBAAoB,GACzB,IAAI,IAAIjB,EAAI,EAAGA,EAAIY,EAAGZ,IACpB,EAAKc,WAAWb,KAAK,IAAIiB,EAAAA,GAAc,GAAFlB,IACrC,EAAKe,UAAUd,KAAK,IAAIiB,EAAAA,GAAY,MACpC,EAAKF,sBAAsBf,KAAK,IAAIiB,EAAAA,GAAY,qBAChD,EAAKD,kBAAkBhB,KAAK,IAAIiB,EAAAA,GAAY,YAC7C,QACH,CAqEC,OArHU,EAGXC,iBAAA,SAAiBR,EAAMhB,GAKrB,IAJA,IAAIiB,EAAIjB,EAAKkB,OACTO,EAAM,GACNC,EAAM,CAAC,EACPC,EAAQ,CAAC,EACLtB,EAAE,EAAEA,EAAEY,EAAEZ,IACdsB,EAAMtB,GAAG,EACTqB,EAAIrB,GAAKA,EAEX,IAASA,EAAI,EAAGA,EAAIW,EAAMX,IACxB,GAAmB,IAAfoB,EAAIP,QAAgBlB,EAAKyB,EAAIA,EAAIP,OAAO,IAAMlB,EAAKK,GACrDoB,EAAInB,KAAKD,GACTqB,EAAIrB,GAAKoB,EAAIP,OAAO,EACpBS,EAAMtB,GAAK,OAEX,IAAK,IAAIE,EAAI,EAAGA,EAAIkB,EAAIP,OAAQX,IAC9B,GAAIP,EAAKyB,EAAIlB,KAAOP,EAAKK,GAAI,CAC3BsB,EAAMtB,GAAKsB,EAAMF,EAAIlB,IAAI,EACzBkB,EAAIlB,GAAKF,EACTqB,EAAIrB,GAAKE,EACT,KACF,CAIN,MAAO,CAACkB,IAAKA,EAAKC,IAAKA,EAAKC,MAAOA,EACrC,EAmBC,EAEDC,SAAA,WACE,IAAId,EAAQ,IAAIe,KAAKf,OACrBA,EAAMC,SAAWD,EAAME,KACvBF,EAAME,MAAQ,EACVF,EAAME,KAAOa,KAAKhB,MAAMb,KAAKkB,SAC/BJ,EAAME,KAAOa,KAAKhB,MAAMb,KAAKkB,QAC/BW,KAAKC,SAAShB,EAChB,EAAC,EACDiB,UAAA,WACE,IAAIjB,EAAQ,IAAIe,KAAKf,OACrBA,EAAMC,SAAWD,EAAME,KACvBF,EAAME,KAAO,EACba,KAAKC,SAAShB,EAChB,EAAC,EAEDkB,OAAA,WACE,MAAMhC,EAAO6B,KAAKhB,MAAMb,KAClBiB,EAAIjB,EAAKkB,OAGf,IADA,IAAIe,EAAQJ,KAAKL,iBAAiBK,KAAKf,MAAME,KAAMhB,GAC1CK,EAAE,EAAEA,EAAEY,EAAEZ,IACf,GAAuB,IAAnB4B,EAAMN,MAAMtB,GAAU,CACxB,IAAIqB,EAAMO,EAAMP,IAAIrB,GACpBwB,KAAKV,WAAWd,GAAG6B,MAAmB,GAAbD,EAAMP,IAAIrB,IACnCwB,KAAKT,UAAUf,GAAG6B,MAA0E,GAApE1B,KAAK2B,IAAI,EAAIF,EAAMN,MAAMM,EAAMR,IAAIQ,EAAMP,IAAIrB,KAAO4B,EAAMN,MAAMtB,KAExFwB,KAAKR,sBAAsBhB,GAAG6B,MAAM,aAAe,GAAG,IAAUjB,EAAES,GAAKT,GAAC,KAAK,KAAKA,EAAES,GAAKT,EAAC,MAC1FY,KAAKP,kBAAkBjB,GAAG6B,MAAM,UAClC,MACEL,KAAKV,WAAWd,GAAG6B,MAAQ,GAAF7B,GACzBwB,KAAKT,UAAUf,GAAG6B,MAAM,KACxBL,KAAKR,sBAAsBhB,GAAG6B,MAAM,oBACpCL,KAAKP,kBAAkBjB,GAAG6B,MAAM,WAIpC,IAAIE,EAAU,GACd,IAAQ/B,EAAI,EAAGA,EAAIY,EAAGZ,IAGpB+B,EAAQ9B,KACN,gBAAC,QAAY,CAAC+B,MAAO,CACnBC,QAAQ,cACRC,MAAM,OACNC,OAAO,OACPC,SAAS,WACTC,KAAKb,KAAKV,WAAWd,GACrBsC,IAAId,KAAKT,UAAUf,GACnBuC,gBAAgBf,KAAKR,sBAAsBhB,GAC3CwC,YAAYhB,KAAKP,kBAAkBjB,GACnCyC,YAAY,MACZC,YAAY,QACZC,SAAS,OACTC,eAAe,SAASC,WAAW,WAAYlD,EAAKK,KAM1D,OAAQ,gCACR,kCAAU8C,KAAKC,UAAUpD,IACzB,uBAAKqC,MAAO,CAACI,SAAS,WAAWD,OAAO,UACrCJ,GAEH,0BAAQjC,QAAS0B,KAAKD,SAASjB,KAAKkB,OAAM,aAC1C,0BAAQ1B,QAAS0B,KAAKE,UAAUpB,KAAKkB,OAAM,SAE7C,EAAC,EArHU,CAASwB,EAAAA,U","sources":["webpack://gatsby-starter-default/./src/pages/lis.js"],"sourcesContent":["import * as React from \"react\"\nimport {Component, useState} from \"react\"\nimport { Link } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport Seo from \"../components/seo\"\nimport \"../components/lis.css\"\nimport { animated, SpringValue } from '@react-spring/web'\n\n\n\nconst SecondPage = () => {\n  const [data, setData] = useState([0, 2, 10, 14, 8, 3, 4, 7, 13, 12, 5, 9, 15, 1, 11, 6]);\n  const randomPermute = () => {\n    var p = []\n    for (var i = 0; i < 16; i++) p.push(i);\n    for (var i = 0; i < 16; i++) {\n      var j = Math.floor(Math.random() * (16 - i)) + i;\n      [p[i], p[j]] = [p[j], p[i]];\n    }\n    setData(p)\n  };\n  return (\n  <Layout>\n    <h1>Shensted's Algorithm</h1>\n    <button onClick={randomPermute.bind(this)}>Change a Permutation</button>\n    <ShowLIS data={data}/>\n  </Layout>\n)};\n\nexport const Head = () => <Seo title=\"Page two\" />\n\nexport default SecondPage\n\nclass ShowLIS extends Component {\n  \n\n  computeLisByStep(step, data) {\n    var n = data.length;\n    var lis = []\n    var pos = {}\n    var depth = {}\n    for(var i=0;i<n;i++) {\n      depth[i]=0;\n      pos[i] = i;\n    }\n    for (var i = 0; i < step; i++) {\n      if (lis.length === 0 || data[lis[lis.length-1]] < data[i]) {\n        lis.push(i);\n        pos[i] = lis.length-1;\n        depth[i] = 1;\n      } else {\n        for (var j = 0; j < lis.length; j++) {\n          if (data[lis[j]] >= data[i]) {\n            depth[i] = depth[lis[j]]+1;\n            lis[j] = i;\n            pos[i] = j;\n            break;\n          }\n        }\n      }\n    }\n    return {lis: lis, pos: pos, depth: depth};\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      prevstep: 0,\n      step: 8,\n    }\n    var n = props.data.length;\n    this.springLeft = []\n    this.springTop = []\n    this.springBackgroundColor = []\n    this.springBorderColor = []\n    for(var i = 0; i < n ;i++) {\n      this.springLeft.push(new SpringValue(i*60));\n      this.springTop.push(new SpringValue(300));\n      this.springBackgroundColor.push(new SpringValue(`rgb(90%,90%,90%)`))\n      this.springBorderColor.push(new SpringValue(\"#777777\"))\n    }\n  }\n\n  nextStep() {\n    var state = {...this.state};\n    state.prevstep = state.step;\n    state.step += 1;\n    if (state.step > this.props.data.length)\n      state.step = this.props.data.length;\n    this.setState(state);\n  }\n  resetStep() {\n    var state = {...this.state};\n    state.prevstep = state.step;\n    state.step = 0;\n    this.setState(state);\n  }\n  \n  render() {\n    const data = this.props.data;\n    const n = data.length;\n    // var fromlis = this.computeLisByStep(this.state.prevstep, data);\n    var tolis = this.computeLisByStep(this.state.step, data);\n    for (var i=0;i<n;i++) {\n      if (tolis.depth[i] !== 0) {\n        var pos = tolis.pos[i];\n        this.springLeft[i].start(tolis.pos[i]*70);\n        this.springTop[i].start(Math.log(1 + tolis.depth[tolis.lis[tolis.pos[i]]] - tolis.depth[i])*35);\n        // this.springTop[i].start((tolis.depth[tolis.lis[tolis.pos[i]]] - tolis.depth[i])*60);\n        this.springBackgroundColor[i].start(`rgb(${100}%,${74+(100-74)*(n-pos)/n}%,${100*(n-pos)/n}%)`)\n        this.springBorderColor[i].start(\"#D4AF37\");\n      } else {\n        this.springLeft[i].start(i*60);\n        this.springTop[i].start(300);\n        this.springBackgroundColor[i].start(`rgb(90%,90%,90%)`);\n        this.springBorderColor[i].start(\"#777777\");\n      }\n    }\n    \n    var squares = [];\n    for(var i = 0; i < n; i++) {\n      // var dlevel = (depth[i]===0? -1 : depth[lis[pos[i]]] - depth[i]);\n\n      squares.push(\n        <animated.div style={{\n          display:\"inline-flex\",\n          width:\"60px\",\n          height:\"60px\",\n          position:\"absolute\",\n          left:this.springLeft[i],\n          top:this.springTop[i],\n          backgroundColor:this.springBackgroundColor[i],\n          borderColor:this.springBorderColor[i],\n          borderWidth:\"2px\",\n          borderStyle:\"solid\",\n          fontSize:\"40px\",\n          justifyContent:\"center\",alignItems:\"center\"}}>{data[i]}</animated.div>\n      );\n    }\n\n    \n\n    return (<>\n    <p>Data: {JSON.stringify(data)}</p>\n    <div style={{position:\"relative\",height:\"400px\"}}>\n      {squares}\n    </div>\n    <button onClick={this.nextStep.bind(this)}>Next Step</button>\n    <button onClick={this.resetStep.bind(this)}>Reset</button>\n    </>);\n  }\n}\n\n\n\nfunction Tile(dlevel, pos, data, n) {\n  var bgcolor = '#FFF';\n  var border = \"2px solid #D4AF37\";\n  var left = pos*70;\n  var top = dlevel*35;\n  if (dlevel === -1) {\n    bgcolor = \"#DDD\";\n    border = '2px solid #777';\n    left = pos*60;\n    top = 300;\n  } else {\n    bgcolor = `rgb(${100}%,${74+(100-74)*(n-pos)/n}%,${100*(n-pos)/n}%)`;\n  }\n  return (\n    <div className=\"listile\" style={{\n      display:\"inline-flex\",\n      width:\"60px\",\n      height:\"60px\",\n      position:\"absolute\",\n      left:left,top:top,\n      backgroundColor:bgcolor,\n      border:border,\n      fontSize:\"40px\",\n      justifyContent:\"center\",alignItems:\"center\"}}>{data}</div>\n  );\n}\n"],"names":["Head","title","data","setData","useState","onClick","p","i","push","j","Math","floor","random","bind","ShowLIS","props","state","prevstep","step","n","length","springLeft","springTop","springBackgroundColor","springBorderColor","SpringValue","computeLisByStep","lis","pos","depth","nextStep","this","setState","resetStep","render","tolis","start","log","squares","style","display","width","height","position","left","top","backgroundColor","borderColor","borderWidth","borderStyle","fontSize","justifyContent","alignItems","JSON","stringify","Component"],"sourceRoot":""}